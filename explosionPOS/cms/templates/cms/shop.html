{% extends "base.html" %}
{% load staticfiles %}
{% block title %} ITEM Shop {% endblock %}
{% block extrahead %}
<link href="{% static 'cms/shop.css' %}" rel="stylesheet">
{% endblock %}
{% block content %}
<ul id="product_slider">
	{% for item in items %}
	<li class="product_item" id="pi-Jan{{ item.code }}">
		<div class="pi_image_div">
			<img class="pi_image_img" src="{{ item.image.url }}" alt=" image of {{ item.name }}" />
		</div>
		<div class="pi_label">
			<span class="pi_code">JAN:{{ item.code }}</span><br />
			<span class="pi_name">{{ item.name }}</span><br />
			<span class="pi_price">￥{{ item.selling_price }}-</span> <span class="pi_stock">{{ item.stock }} pcs.</span>
		</div>
	</li>
	{% endfor %}
</ul>
<div class="container">
	<form id="mainForm" action="{% url 'cms:buy' %}" method="post">
		{% csrf_token %}
		<div id="ContainerQ1">
			Who are you? Touch your card or use guest account.<br />


			<table id="userInfo">
				<tbody>
					<tr><td>ID</td><td id="userinfo_student_id"></td></tr>
					<tr><td>Name</td><td id="userinfo_name"></td></tr>
					<tr><td>LastMonth</td><td id="userinfo_LastmonthCost"></td></tr>
					<tr><td>ThisMonth</td><td id="userinfo_ThismonthCost"></td></tr>
				</tbody>
			</table>

		</div>
		<div id="ContainerQ2">
			<!-- textBoxが一つの場合、Enter押下で即座に爆裂する -->
			<input type="text" name="dummy" style="display:none;">
			<input type="text" id="TxtJAN" name="item" /><br />
			<span id="SpanMsgQ2"></span>
		</div>
		<div id="ContainerQ3">
			<div id="ContainerPrice">
			<p>Price:@<span id="SpanPrice">---</span> x 
			<select id="SelectValue" name="value">
			</select> pcs
			= Cost:<span id="SpanCost">---</span>JPY</p>
			</div>
		</div>

		<input type="button" id="BtnBuy" value="BUY" style="display:none;" />
	</form>
</div>
<script>
	"use strict";
	var itemPrice = [];
	var itemStock = [];
	
	{% for item in items %}
		itemPrice["{{ item.code }}"] = {{ item.selling_price }};
		itemStock["{{ item.code }}"] = {{ item.stock }};
	{% endfor %}	

</script>
<script src="{% static 'cms/shop.js' %}"></script>
{% endblock %}